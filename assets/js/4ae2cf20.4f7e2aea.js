"use strict";(globalThis.webpackChunkrelease_tool_website=globalThis.webpackChunkrelease_tool_website||[]).push([[510],{6271:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>d,contentTitle:()=>t,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"release-bot","title":"Release Bot","description":"\x3c!--","source":"@site/doc/release-bot.md","sourceDirName":".","slug":"/release-bot","permalink":"/release-tool/docs/release-bot","draft":false,"unlisted":false,"editUrl":"https://github.com/sequentech/release-tool/tree/main/docs/doc/release-bot.md","tags":[],"version":"current","frontMatter":{"id":"release-bot","title":"Release Bot"},"sidebar":"tutorialSidebar","previous":{"title":"Policies","permalink":"/release-tool/docs/policies"},"next":{"title":"Scenarios","permalink":"/release-tool/docs/scenarios"}}');var l=n(4848),i=n(8453);const o={id:"release-bot",title:"Release Bot"},t="Release Bot",d={},a=[{value:"Overview",id:"overview",level:2},{value:"Setup",id:"setup",level:2},{value:"1. Install Release Bot",id:"1-install-release-bot",level:3},{value:"2. Configure Release Tool",id:"2-configure-release-tool",level:3},{value:"Usage",id:"usage",level:2},{value:"Manual Workflow Dispatch",id:"manual-workflow-dispatch",level:3},{value:"ChatOps Commands",id:"chatops-commands",level:3},{value:"<code>/release-bot update</code>",id:"release-bot-update",level:4},{value:"<code>/release-bot publish [version]</code>",id:"release-bot-publish-version",level:4},{value:"<code>/release-bot generate [version]</code>",id:"release-bot-generate-version",level:4},{value:"<code>/release-bot list</code>",id:"release-bot-list",level:4},{value:"Automatic Pushing",id:"automatic-pushing",level:3},{value:"PR Merge Auto-Pushing",id:"pr-merge-auto-pushing",level:4},{value:"Issue Close Auto-Pushing",id:"issue-close-auto-pushing",level:4},{value:"Release Modes",id:"release-modes",level:2},{value:"Draft Mode",id:"draft-mode",level:3},{value:"Published Mode",id:"published-mode",level:3},{value:"Just-Publish Mode (New)",id:"just-publish-mode-new",level:3},{value:"Complete Workflow Examples",id:"complete-workflow-examples",level:2},{value:"Example 1: Manual Release with PR Review",id:"example-1-manual-release-with-pr-review",level:3},{value:"Example 2: Quick Patch Release",id:"example-2-quick-patch-release",level:3},{value:"Example 3: ChatOps Update Flow",id:"example-3-chatops-update-flow",level:3},{value:"Example 4: Issue-Driven Release",id:"example-4-issue-driven-release",level:3},{value:"Issue Association",id:"issue-association",level:2},{value:"PR Body Parsing",id:"pr-body-parsing",level:3},{value:"Database Storage",id:"database-storage",level:3},{value:"Configuration Options",id:"configuration-options",level:2},{value:"Workflow Inputs",id:"workflow-inputs",level:3},{value:"Config File Settings",id:"config-file-settings",level:3},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"PR Merge Doesn&#39;t Auto-Publish",id:"pr-merge-doesnt-auto-publish",level:3},{value:"Issue Not Associated with Release",id:"issue-not-associated-with-release",level:3},{value:"Just-Publish Fails with &quot;No existing release&quot;",id:"just-publish-fails-with-no-existing-release",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Draft Mode for Preparation",id:"1-use-draft-mode-for-preparation",level:3},{value:"2. Consistent Branch Naming",id:"2-consistent-branch-naming",level:3},{value:"3. Link PRs to Issues",id:"3-link-prs-to-issues",level:3},{value:"4. Review Before Merge",id:"4-review-before-merge",level:3},{value:"5. Enable Debug for Troubleshooting",id:"5-enable-debug-for-troubleshooting",level:3},{value:"Security Considerations",id:"security-considerations",level:2},{value:"Token Permissions",id:"token-permissions",level:3},{value:"Workflow Protection",id:"workflow-protection",level:3},{value:"See Also",id:"see-also",level:2}];function c(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.header,{children:(0,l.jsx)(s.h1,{id:"release-bot",children:"Release Bot"})}),"\n",(0,l.jsx)(s.p,{children:"Release Bot is a GitHub Action that automates your release workflow by integrating release-tool directly into GitHub Actions."}),"\n",(0,l.jsx)(s.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsx)(s.p,{children:"The Release Bot provides three main automation features:"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Manual Release Generation"})," - Create and push releases via GitHub Actions workflow dispatch"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"ChatOps Integration"})," - Control releases through PR and Issue comments"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Automatic Pushing"})," - Auto-push releases when PRs merge or issues close"]}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"setup",children:"Setup"}),"\n",(0,l.jsx)(s.h3,{id:"1-install-release-bot",children:"1. Install Release Bot"}),"\n",(0,l.jsxs)(s.p,{children:["Add the workflow file to your repository at ",(0,l.jsx)(s.code,{children:".github/workflows/release.yml"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-yaml",children:"name: Release Workflow\n\non:\n  workflow_dispatch:\n    inputs:\n      new_version_type:\n        description: 'Auto-bump type (for generate)'\n        required: false\n        type: choice\n        options:\n          - none\n          - patch\n          - minor\n          - major\n          - rc\n      version:\n        description: 'Specific version (e.g., 1.2.0)'\n        required: false\n      from_version:\n        description: 'Compare from this version'\n        required: false\n      force:\n        description: 'Force overwrite'\n        required: false\n        default: 'none'\n        type: choice\n        options:\n          - none\n          - draft\n          - published\n      debug:\n        description: 'Enable debug output'\n        required: false\n        default: false\n        type: boolean\n\n  issue_comment:\n    types: [created]\n\n  pull_request:\n    types: [closed]\n    branches:\n      - 'release/**'\n\n  issues:\n    types: [closed]\n\njobs:\n  release-bot:\n    if: github.event_name != 'issue_comment' || startsWith(github.event.comment.body, '/release-bot ')\n    runs-on: ubuntu-latest\n    permissions:\n      contents: write\n      issues: write\n      pull-requests: write\n    steps:\n      - name: Checkout Repository\n        uses: actions/checkout@v3\n\n      - name: Run Release Bot\n        uses: sequentech/release-bot@v1\n        with:\n          github_token: ${{ secrets.GITHUB_TOKEN }}\n          version: ${{ inputs.version }}\n          new_version_type: ${{ inputs.new_version_type }}\n          from_version: ${{ inputs.from_version }}\n          force: ${{ inputs.force }}\n          debug: ${{ inputs.debug }}\n"})}),"\n",(0,l.jsx)(s.h3,{id:"2-configure-release-tool",children:"2. Configure Release Tool"}),"\n",(0,l.jsxs)(s.p,{children:["Ensure you have a ",(0,l.jsx)(s.code,{children:".release_tool.toml"})," file in your repository root. See ",(0,l.jsx)(s.a,{href:"/release-tool/docs/configuration",children:"Configuration"})," for details."]}),"\n",(0,l.jsx)(s.h2,{id:"usage",children:"Usage"}),"\n",(0,l.jsx)(s.h3,{id:"manual-workflow-dispatch",children:"Manual Workflow Dispatch"}),"\n",(0,l.jsx)(s.p,{children:"Trigger a release manually from the GitHub Actions tab:"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["Go to ",(0,l.jsx)(s.strong,{children:"Actions"})," \u2192 ",(0,l.jsx)(s.strong,{children:"Release Workflow"})]}),"\n",(0,l.jsxs)(s.li,{children:["Click ",(0,l.jsx)(s.strong,{children:"Run workflow"})]}),"\n",(0,l.jsxs)(s.li,{children:["Configure options:","\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Auto-bump type"}),": Choose ",(0,l.jsx)(s.code,{children:"patch"}),", ",(0,l.jsx)(s.code,{children:"minor"}),", ",(0,l.jsx)(s.code,{children:"major"}),", or ",(0,l.jsx)(s.code,{children:"rc"})]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Specific version"}),": Or enter exact version like ",(0,l.jsx)(s.code,{children:"1.2.3"})]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Force"}),": Overwrite existing releases if needed"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"The workflow will:"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:"Sync latest data from GitHub"}),"\n",(0,l.jsx)(s.li,{children:"Generate release notes"}),"\n",(0,l.jsxs)(s.li,{children:["Publish the release (respecting your config's ",(0,l.jsx)(s.code,{children:"release_mode"}),")"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"chatops-commands",children:"ChatOps Commands"}),"\n",(0,l.jsx)(s.p,{children:"Comment on Issues or Pull Requests with these commands:"}),"\n",(0,l.jsx)(s.h4,{id:"release-bot-update",children:(0,l.jsx)(s.code,{children:"/release-bot update"})}),"\n",(0,l.jsx)(s.p,{children:"Regenerates and publishes release notes. Equivalent to manual trigger."}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"/release-bot update\n"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Use case"}),": You've added more commits/PRs and want to refresh the release notes."]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Workflow"}),": pull \u2192 generate \u2192 push"]}),"\n",(0,l.jsx)(s.h4,{id:"release-bot-publish-version",children:(0,l.jsx)(s.code,{children:"/release-bot publish [version]"})}),"\n",(0,l.jsx)(s.p,{children:"Publishes a specific version or auto-detects from issue."}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"/release-bot publish\n/release-bot publish 1.2.3\n"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Use case"}),": Ready to publish a prepared release."]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Version detection"}),":"]}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:"Specified version parameter"}),"\n",(0,l.jsx)(s.li,{children:"Database lookup by issue number"}),"\n",(0,l.jsx)(s.li,{children:'Parse issue title (e.g., "\u2728 Prepare Release 1.2.3")'}),"\n",(0,l.jsxs)(s.li,{children:["Extract from PR branch (e.g., ",(0,l.jsx)(s.code,{children:"release/v1.2.3"}),")"]}),"\n",(0,l.jsx)(s.li,{children:"Extract from PR title"}),"\n"]}),"\n",(0,l.jsx)(s.h4,{id:"release-bot-generate-version",children:(0,l.jsx)(s.code,{children:"/release-bot generate [version]"})}),"\n",(0,l.jsx)(s.p,{children:"Generates release notes without pushing."}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"/release-bot generate\n/release-bot generate 1.2.3\n"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Use case"}),": Preview release notes before pushing."]}),"\n",(0,l.jsx)(s.h4,{id:"release-bot-list",children:(0,l.jsx)(s.code,{children:"/release-bot list"})}),"\n",(0,l.jsx)(s.p,{children:"Lists available draft releases ready to publish."}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"/release-bot list\n"})}),"\n",(0,l.jsx)(s.h3,{id:"automatic-pushing",children:"Automatic Pushing"}),"\n",(0,l.jsx)(s.p,{children:"The bot automatically publishes releases based on two triggers:"}),"\n",(0,l.jsx)(s.h4,{id:"pr-merge-auto-pushing",children:"PR Merge Auto-Pushing"}),"\n",(0,l.jsx)(s.p,{children:"When a PR from a release branch is merged:"}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Example"}),": PR from branch ",(0,l.jsx)(s.code,{children:"release/1.2"})," \u2192 merges to ",(0,l.jsx)(s.code,{children:"main"})]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Bot Actions"}),":"]}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["Extract version from branch name using config pattern","\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Pattern is read from ",(0,l.jsx)(s.code,{children:"branch_policy.release_branch_template"})," in ",(0,l.jsx)(s.code,{children:".release_tool.toml"})]}),"\n",(0,l.jsxs)(s.li,{children:["Default pattern: ",(0,l.jsx)(s.code,{children:"release/{major}.{minor}"})," matches branches like ",(0,l.jsx)(s.code,{children:"release/1.2"}),", ",(0,l.jsx)(s.code,{children:"release/2.0"})]}),"\n",(0,l.jsxs)(s.li,{children:["Custom patterns supported: ",(0,l.jsx)(s.code,{children:"release/v{major}.{minor}.{patch}"})," matches ",(0,l.jsx)(s.code,{children:"release/v1.2.3"})]}),"\n",(0,l.jsx)(s.li,{children:"Fallback: Parse PR title if branch doesn't match pattern"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["Search PR body for issue references:","\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Pattern 1 (closing): ",(0,l.jsx)(s.code,{children:"closes #123"}),", ",(0,l.jsx)(s.code,{children:"fixes #456"}),", ",(0,l.jsx)(s.code,{children:"resolves #789"})]}),"\n",(0,l.jsxs)(s.li,{children:["Pattern 2 (related): ",(0,l.jsx)(s.code,{children:"related to #123"}),", ",(0,l.jsx)(s.code,{children:"see #456"}),", ",(0,l.jsx)(s.code,{children:"issue #789"})]}),"\n",(0,l.jsxs)(s.li,{children:["Pattern 3 (bare): ",(0,l.jsx)(s.code,{children:"#123"})]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["Execute: ",(0,l.jsx)(s.code,{children:"release-tool push 1.2.3 --release-mode just-push --issue 123"})]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Just-Publish Mode"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"\u2705 Marks existing draft release as published"}),"\n",(0,l.jsx)(s.li,{children:"\u2705 Preserves all release properties (notes, name, target)"}),"\n",(0,l.jsx)(s.li,{children:"\u2705 No git tag operations"}),"\n",(0,l.jsx)(s.li,{children:"\u2705 Perfect for PR workflow where draft already exists"}),"\n",(0,l.jsx)(s.li,{children:"\u274c Fails if no existing release found"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Typical Workflow"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"Manual trigger (draft) \u2192 PR created \u2192 PR merged \u2192 just-push\n"})}),"\n",(0,l.jsx)(s.h4,{id:"issue-close-auto-pushing",children:"Issue Close Auto-Pushing"}),"\n",(0,l.jsx)(s.p,{children:"When an issue tagged as a release issue is closed:"}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Example"}),': Issue #123 titled "\u2728 Prepare Release 1.2.3" \u2192 closed']}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Bot Actions"}),":"]}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:"Detect issue closure"}),"\n",(0,l.jsx)(s.li,{children:"Extract version from title or database"}),"\n",(0,l.jsxs)(s.li,{children:["Execute: ",(0,l.jsx)(s.code,{children:"release-tool push 1.2.3 --release-mode published"})]}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Published Mode"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Creates or updates full release"}),"\n",(0,l.jsx)(s.li,{children:"Creates/pushes git tags if needed"}),"\n",(0,l.jsx)(s.li,{children:"Updates release notes"}),"\n",(0,l.jsx)(s.li,{children:"Suitable for manual control"}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"release-modes",children:"Release Modes"}),"\n",(0,l.jsx)(s.p,{children:"The bot uses three release modes depending on the context:"}),"\n",(0,l.jsx)(s.h3,{id:"draft-mode",children:"Draft Mode"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"--release-mode draft\n"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Purpose"}),": Create non-public release for review"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Behavior"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["Creates GitHub release with ",(0,l.jsx)(s.code,{children:"draft: true"})]}),"\n",(0,l.jsx)(s.li,{children:"Not visible to public"}),"\n",(0,l.jsx)(s.li,{children:"Allows review before pushing"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Use cases"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Preparing releases for review"}),"\n",(0,l.jsx)(s.li,{children:"Staging changes before announcement"}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"published-mode",children:"Published Mode"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"--release-mode published\n"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Purpose"}),": Full release creation/update with all operations"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Behavior"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Creates or updates git tags (local + remote)"}),"\n",(0,l.jsx)(s.li,{children:"Generates/updates release notes"}),"\n",(0,l.jsx)(s.li,{children:"Publishes to GitHub (visible to public)"}),"\n",(0,l.jsx)(s.li,{children:"Creates/updates all metadata"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Use cases"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"First-time release creation"}),"\n",(0,l.jsx)(s.li,{children:"Issue-triggered auto-pushing"}),"\n",(0,l.jsx)(s.li,{children:"Manual publish with full control"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Example"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"release-tool push 1.2.3 --release-mode published\n"})}),"\n",(0,l.jsx)(s.h3,{id:"just-publish-mode-new",children:"Just-Publish Mode (New)"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"--release-mode just-push\n"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Purpose"}),": Mark existing draft as published without modifications"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Behavior"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:["\u2705 Updates existing release: ",(0,l.jsx)(s.code,{children:"draft: false"})]}),"\n",(0,l.jsx)(s.li,{children:"\u2705 Preserves title, body, prerelease, target"}),"\n",(0,l.jsx)(s.li,{children:"\u2705 No tag creation/pushing"}),"\n",(0,l.jsx)(s.li,{children:"\u2705 No release notes regeneration"}),"\n",(0,l.jsx)(s.li,{children:"\u274c Errors if release doesn't exist"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Use cases"}),":"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"PR merge automation"}),"\n",(0,l.jsx)(s.li,{children:"Pushing pre-prepared drafts"}),"\n",(0,l.jsx)(s.li,{children:"Separating preparation from pushing"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Example"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"release-tool push 1.2.3 --release-mode just-push\n"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Error handling"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"Error: No existing GitHub release found for v1.2.3\nUse --release-mode published or draft to create a new release\n"})}),"\n",(0,l.jsx)(s.h2,{id:"complete-workflow-examples",children:"Complete Workflow Examples"}),"\n",(0,l.jsx)(s.h3,{id:"example-1-manual-release-with-pr-review",children:"Example 1: Manual Release with PR Review"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Create Draft Release"})," (Manual trigger)"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"Actions \u2192 Run workflow\nVersion: 1.2.3\nRelease mode: draft\n"})}),"\n",(0,l.jsx)(s.p,{children:"Result: Draft release created with notes"}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Review in PR"})," (Automatic)\nBot creates PR with release notes\nTeam reviews changes"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Merge PR"})," (Automatic just-push)\nPR merges \u2192 Bot runs:"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"release-tool push 1.2.3 --release-mode just-push\n"})}),"\n",(0,l.jsx)(s.p,{children:"Result: Draft marked as published"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"example-2-quick-patch-release",children:"Example 2: Quick Patch Release"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.strong,{children:"Generate and Publish"})," (Manual trigger)","\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"Actions \u2192 Run workflow\nAuto-bump: patch\nForce: none\n"})}),"\n","Result: Immediate published release"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"example-3-chatops-update-flow",children:"Example 3: ChatOps Update Flow"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Initial Release"})," (ChatOps)"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"Comment: /release-bot update\n"})}),"\n",(0,l.jsx)(s.p,{children:"Result: pull \u2192 generate \u2192 push"}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Add More Changes"})," (Development)\nMerge more PRs/commits"]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Refresh Release"})," (ChatOps)"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"Comment: /release-bot update\n"})}),"\n",(0,l.jsx)(s.p,{children:"Result: Updated release with new changes"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"example-4-issue-driven-release",children:"Example 4: Issue-Driven Release"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Create Issue"}),'\nTitle: "\u2728 Prepare Release 1.2.3"']}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Work on Release"}),"\nLink PRs to issue with ",(0,l.jsx)(s.code,{children:"closes #123"})]}),"\n"]}),"\n",(0,l.jsxs)(s.li,{children:["\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Close Issue"}),"\nIssue closed \u2192 Bot auto-publishes v1.2.3"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"issue-association",children:"Issue Association"}),"\n",(0,l.jsx)(s.p,{children:"The bot automatically associates issues with releases:"}),"\n",(0,l.jsx)(s.h3,{id:"pr-body-parsing",children:"PR Body Parsing"}),"\n",(0,l.jsx)(s.p,{children:"When analyzing a PR, the bot searches for issue references:"}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Pattern 1 - Closing Keywords"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"closes #123\nfixes #456\nresolves #789\n"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Pattern 2 - Related Keywords"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"related to #123\nsee #456\nissue #789\n"})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Pattern 3 - Bare References"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"#123\n"})}),"\n",(0,l.jsx)(s.h3,{id:"database-storage",children:"Database Storage"}),"\n",(0,l.jsxs)(s.p,{children:["Associated issues are stored in the ",(0,l.jsx)(s.code,{children:"release_issues"})," table:"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsx)(s.li,{children:"Links versions to issue numbers"}),"\n",(0,l.jsx)(s.li,{children:"Enables version lookup from issues"}),"\n",(0,l.jsx)(s.li,{children:"Tracks release preparation progress"}),"\n"]}),"\n",(0,l.jsx)(s.h2,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,l.jsx)(s.h3,{id:"workflow-inputs",children:"Workflow Inputs"}),"\n",(0,l.jsxs)(s.table,{children:[(0,l.jsx)(s.thead,{children:(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.th,{children:"Input"}),(0,l.jsx)(s.th,{children:"Description"}),(0,l.jsx)(s.th,{children:"Default"})]})}),(0,l.jsxs)(s.tbody,{children:[(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"github_token"})}),(0,l.jsx)(s.td,{children:"GitHub token for API access"}),(0,l.jsx)(s.td,{children:"Required"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"version"})}),(0,l.jsx)(s.td,{children:"Specific version to release"}),(0,l.jsx)(s.td,{children:"Auto-detected"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"new_version_type"})}),(0,l.jsx)(s.td,{children:"Auto-bump: patch/minor/major/rc"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"none"})})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"from_version"})}),(0,l.jsx)(s.td,{children:"Compare from this version"}),(0,l.jsx)(s.td,{children:"Latest"})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"force"})}),(0,l.jsx)(s.td,{children:"Force overwrite: none/draft/published"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"none"})})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"debug"})}),(0,l.jsx)(s.td,{children:"Enable verbose logging"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"false"})})]}),(0,l.jsxs)(s.tr,{children:[(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:"config_path"})}),(0,l.jsx)(s.td,{children:"Path to config file"}),(0,l.jsx)(s.td,{children:(0,l.jsx)(s.code,{children:".release_tool.toml"})})]})]})]}),"\n",(0,l.jsx)(s.h3,{id:"config-file-settings",children:"Config File Settings"}),"\n",(0,l.jsxs)(s.p,{children:["Control default behavior in ",(0,l.jsx)(s.code,{children:".release_tool.toml"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-toml",children:'[output]\ncreate_github_release = true\nrelease_mode = "draft"  # or "published"\nprerelease = "auto"\n\n[branch_policy]\n# Branch pattern for release branches (used by bot to detect PR merges)\nrelease_branch_template = "release/{major}.{minor}"  # Default\n# Other examples:\n# release_branch_template = "release/v{major}.{minor}.{patch}"\n# release_branch_template = "releases/{major}.{minor}"\n'})}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Branch Pattern Detection"}),": The bot uses ",(0,l.jsx)(s.code,{children:"release_branch_template"})," to detect which PR merges should trigger auto-pushing. The template supports Jinja2-style placeholders:"]}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"{major}"})," - Major version number"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"{minor}"})," - Minor version number"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"{patch}"})," - Patch version number"]}),"\n"]}),"\n",(0,l.jsx)(s.p,{children:"The bot converts this template to a regex pattern to match incoming PR branches."}),"\n",(0,l.jsx)(s.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(s.h3,{id:"pr-merge-doesnt-auto-publish",children:"PR Merge Doesn't Auto-Publish"}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Symptoms"}),": PR merges but release not published"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Checks"}),":"]}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsxs)(s.li,{children:["Workflow has ",(0,l.jsx)(s.code,{children:"on.pull_request"})," configured"]}),"\n",(0,l.jsxs)(s.li,{children:["Branch matches pattern: ",(0,l.jsx)(s.code,{children:"release/**"})]}),"\n",(0,l.jsx)(s.li,{children:"Draft release exists for that version"}),"\n",(0,l.jsx)(s.li,{children:"Check Actions logs for errors"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Solution"}),":"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-yaml",children:"on:\n  pull_request:\n    types: [closed]\n    branches:\n      - 'release/**'\n"})}),"\n",(0,l.jsx)(s.h3,{id:"issue-not-associated-with-release",children:"Issue Not Associated with Release"}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Symptoms"}),": Bot can't find version from issue"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Checks"}),":"]}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:'Issue title includes version: "\u2728 Prepare Release 1.2.3"'}),"\n",(0,l.jsxs)(s.li,{children:["PRs reference issue: ",(0,l.jsx)(s.code,{children:"closes #123"})]}),"\n",(0,l.jsx)(s.li,{children:"Database synced: Run pull command"}),"\n"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Solution"}),": Manually specify version:"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"/release-bot publish 1.2.3\n"})}),"\n",(0,l.jsx)(s.h3,{id:"just-publish-fails-with-no-existing-release",children:'Just-Publish Fails with "No existing release"'}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Symptoms"}),": PR merge fails with error"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Cause"}),": No draft release exists yet"]}),"\n",(0,l.jsxs)(s.p,{children:[(0,l.jsx)(s.strong,{children:"Solution"}),": Create draft first:"]}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-bash",children:"release-tool generate 1.2.3\nrelease-tool push 1.2.3 --release-mode draft\n"})}),"\n",(0,l.jsx)(s.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsx)(s.h3,{id:"1-use-draft-mode-for-preparation",children:"1. Use Draft Mode for Preparation"}),"\n",(0,l.jsx)(s.p,{children:"Create drafts early, review before pushing:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-yaml",children:'[output]\nrelease_mode = "draft"\n'})}),"\n",(0,l.jsx)(s.h3,{id:"2-consistent-branch-naming",children:"2. Consistent Branch Naming"}),"\n",(0,l.jsx)(s.p,{children:"Use clear branch patterns:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{children:"release/v1.2.3\nrelease/1.2.3\nhotfix/v1.2.4\n"})}),"\n",(0,l.jsx)(s.h3,{id:"3-link-prs-to-issues",children:"3. Link PRs to Issues"}),"\n",(0,l.jsx)(s.p,{children:"Always reference issues in PR bodies:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-markdown",children:"This PR implements feature X.\n\nCloses #123\n"})}),"\n",(0,l.jsx)(s.h3,{id:"4-review-before-merge",children:"4. Review Before Merge"}),"\n",(0,l.jsx)(s.p,{children:"Use PR review process:"}),"\n",(0,l.jsxs)(s.ol,{children:["\n",(0,l.jsx)(s.li,{children:"Bot creates draft + PR"}),"\n",(0,l.jsx)(s.li,{children:"Team reviews release notes"}),"\n",(0,l.jsx)(s.li,{children:"Merge PR \u2192 auto-publish"}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"5-enable-debug-for-troubleshooting",children:"5. Enable Debug for Troubleshooting"}),"\n",(0,l.jsx)(s.p,{children:"When investigating issues:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-yaml",children:"debug: true\n"})}),"\n",(0,l.jsx)(s.h2,{id:"security-considerations",children:"Security Considerations"}),"\n",(0,l.jsx)(s.h3,{id:"token-permissions",children:"Token Permissions"}),"\n",(0,l.jsx)(s.p,{children:"The bot requires:"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"contents: write"})," - Create tags and releases"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"issues: write"})," - Comment on issues"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.code,{children:"pull-requests: write"})," - Comment on PRs"]}),"\n"]}),"\n",(0,l.jsx)(s.h3,{id:"workflow-protection",children:"Workflow Protection"}),"\n",(0,l.jsx)(s.p,{children:"Limit who can trigger manual workflows:"}),"\n",(0,l.jsx)(s.pre,{children:(0,l.jsx)(s.code,{className:"language-yaml",children:"on:\n  workflow_dispatch:\n    # Only allow specific users/teams\n"})}),"\n",(0,l.jsx)(s.h2,{id:"see-also",children:"See Also"}),"\n",(0,l.jsxs)(s.ul,{children:["\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.a,{href:"/release-tool/docs/configuration",children:"Configuration"})," - Configure release-tool"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.a,{href:"/release-tool/docs/usage",children:"Usage"})," - Manual release-tool usage"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.a,{href:"/release-tool/docs/policies",children:"Policies"})," - Customize release note generation"]}),"\n",(0,l.jsxs)(s.li,{children:[(0,l.jsx)(s.a,{href:"/release-tool/docs/scenarios",children:"Scenarios"})," - Real-world examples"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,l.jsx)(s,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},8453:(e,s,n)=>{n.d(s,{R:()=>o,x:()=>t});var r=n(6540);const l={},i=r.createContext(l);function o(e){const s=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function t(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),r.createElement(i.Provider,{value:s},e.children)}}}]);