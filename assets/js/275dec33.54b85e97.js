"use strict";(globalThis.webpackChunkrelease_tool_website=globalThis.webpackChunkrelease_tool_website||[]).push([[495],{8453:(e,n,r)=>{r.d(n,{R:()=>a,x:()=>c});var s=r(6540);const l={},i=s.createContext(l);function a(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),s.createElement(i.Provider,{value:n},e.children)}},9899:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>d,frontMatter:()=>a,metadata:()=>s,toc:()=>t});const s=JSON.parse('{"id":"branching-strategy","title":"Branching Strategy","description":"\x3c!--","source":"@site/doc/branching-strategy.md","sourceDirName":".","slug":"/branching-strategy","permalink":"/release-tool/docs/branching-strategy","draft":false,"unlisted":false,"editUrl":"https://github.com/sequentech/release-tool/tree/main/docs/doc/branching-strategy.md","tags":[],"version":"current","frontMatter":{"id":"branching-strategy","title":"Branching Strategy"},"sidebar":"tutorialSidebar","next":{"title":"Configuration","permalink":"/release-tool/docs/configuration"}}');var l=r(4848),i=r(8453);const a={id:"branching-strategy",title:"Branching Strategy"},c="Branching Strategy",o={},t=[{value:"Overview",id:"overview",level:2},{value:"How It Works",id:"how-it-works",level:2},{value:"Branch Creation Rules",id:"branch-creation-rules",level:3},{value:"New Major Version (e.g., 9.0.0)",id:"new-major-version-eg-900",level:4},{value:"New Minor Version (e.g., 9.1.0)",id:"new-minor-version-eg-910",level:4},{value:"Patch or RC (e.g., 9.1.1 or 9.1.0-rc.1)",id:"patch-or-rc-eg-911-or-910-rc1",level:4},{value:"Configuration",id:"configuration",level:2},{value:"Configuration Options",id:"configuration-options",level:3},{value:"Examples",id:"examples",level:2},{value:"Example 1: First Major Release",id:"example-1-first-major-release",level:3},{value:"Example 2: New Minor Release",id:"example-2-new-minor-release",level:3},{value:"Example 3: RC on Existing Branch",id:"example-3-rc-on-existing-branch",level:3},{value:"Example 4: Hotfix Patch Release",id:"example-4-hotfix-patch-release",level:3},{value:"Branch Workflow",id:"branch-workflow",level:2},{value:"Recommended Git Workflow",id:"recommended-git-workflow",level:3},{value:"Custom Branch Templates",id:"custom-branch-templates",level:2},{value:"Disabling Automatic Branch Creation",id:"disabling-automatic-branch-creation",level:2},{value:"Branching from Main Instead of Previous Release",id:"branching-from-main-instead-of-previous-release",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Branch Already Exists",id:"branch-already-exists",level:3},{value:"Branch Not Found",id:"branch-not-found",level:3},{value:"Wrong Source Branch",id:"wrong-source-branch",level:3},{value:"Integration with Version Gaps",id:"integration-with-version-gaps",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"See Also",id:"see-also",level:2}];function h(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"branching-strategy",children:"Branching Strategy"})}),"\n",(0,l.jsx)(n.p,{children:"The release tool implements an automated branching strategy that creates and manages release branches according to semantic versioning best practices."}),"\n",(0,l.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,l.jsxs)(n.p,{children:["Release branches follow the pattern ",(0,l.jsx)(n.code,{children:"release/{major}.{minor}"})," (configurable) and are automatically created based on the version being released. This enables:"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Parallel development"}),": Work on multiple release lines simultaneously"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Hotfix workflows"}),": Patch older releases without affecting newer ones"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Clear release history"}),": Each major.minor gets its own dedicated branch"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"how-it-works",children:"How It Works"}),"\n",(0,l.jsx)(n.h3,{id:"branch-creation-rules",children:"Branch Creation Rules"}),"\n",(0,l.jsx)(n.p,{children:"The tool determines the source branch based on the version being released:"}),"\n",(0,l.jsx)(n.h4,{id:"new-major-version-eg-900",children:"New Major Version (e.g., 9.0.0)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Source"}),": ",(0,l.jsx)(n.code,{children:"main"})," (or configured ",(0,l.jsx)(n.code,{children:"default_branch"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Reason"}),": Major versions represent significant changes and start fresh from the main development line"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Example"}),": ",(0,l.jsx)(n.code,{children:"release/9.0"})," branches from ",(0,l.jsx)(n.code,{children:"main"})]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"new-minor-version-eg-910",children:"New Minor Version (e.g., 9.1.0)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Source"}),": Previous release branch (e.g., ",(0,l.jsx)(n.code,{children:"release/9.0"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Fallback"}),": ",(0,l.jsx)(n.code,{children:"main"})," if no previous release branch exists"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Reason"}),": Minor versions build upon the previous minor release"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Example"}),": ",(0,l.jsx)(n.code,{children:"release/9.1"})," branches from ",(0,l.jsx)(n.code,{children:"release/9.0"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Config"}),": Controlled by ",(0,l.jsx)(n.code,{children:"branch_from_previous_release"})," setting"]}),"\n"]}),"\n",(0,l.jsx)(n.h4,{id:"patch-or-rc-eg-911-or-910-rc1",children:"Patch or RC (e.g., 9.1.1 or 9.1.0-rc.1)"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Source"}),": Existing release branch (e.g., ",(0,l.jsx)(n.code,{children:"release/9.1"}),")"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Reason"}),": Patches and RCs are built on the same release branch"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"No new branch created"})," if the release branch already exists"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"configuration",children:"Configuration"}),"\n",(0,l.jsxs)(n.p,{children:["Configure the branching behavior in ",(0,l.jsx)(n.code,{children:"release_tool.toml"}),":"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'[branch_policy]\n# Template for release branch names\n# Use {major}, {minor}, {patch} as placeholders\nrelease_branch_template = "release/{major}.{minor}"\n\n# Default branch for new major versions\ndefault_branch = "main"\n\n# Automatically create release branches\ncreate_branches = true\n\n# Branch new minor versions from previous release\nbranch_from_previous_release = true\n'})}),"\n",(0,l.jsx)(n.h3,{id:"configuration-options",children:"Configuration Options"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Option"}),(0,l.jsx)(n.th,{children:"Default"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"release_branch_template"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:'"release/{major}.{minor}"'})}),(0,l.jsxs)(n.td,{children:["Template for branch names. Supports ",(0,l.jsx)(n.code,{children:"{major}"}),", ",(0,l.jsx)(n.code,{children:"{minor}"}),", ",(0,l.jsx)(n.code,{children:"{patch}"})," placeholders"]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"default_branch"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:'"main"'})}),(0,l.jsx)(n.td,{children:"Branch to use for new major versions"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"create_branches"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"true"})}),(0,l.jsx)(n.td,{children:"Automatically create branches if they don't exist"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"branch_from_previous_release"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"true"})}),(0,l.jsx)(n.td,{children:"Branch new minors from previous release branch"})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"examples",children:"Examples"}),"\n",(0,l.jsx)(n.h3,{id:"example-1-first-major-release",children:"Example 1: First Major Release"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Current state: No release branches exist\n# Creating first 9.0.0 release\n\n$ release-tool generate 9.0.0 --repo-path .\n\n# Output:\n# Release branch: release/9.0\n# \u2192 Branch does not exist, will create from: main\n# \u2713 Created branch 'release/9.0' from 'main'\n"})}),"\n",(0,l.jsx)(n.h3,{id:"example-2-new-minor-release",children:"Example 2: New Minor Release"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Current state: release/9.0 exists\n# Creating 9.1.0 release\n\n$ release-tool generate 9.1.0 --repo-path .\n\n# Output:\n# Release branch: release/9.1\n# \u2192 Branch does not exist, will create from: release/9.0\n# \u2713 Created branch 'release/9.1' from 'release/9.0'\n"})}),"\n",(0,l.jsx)(n.h3,{id:"example-3-rc-on-existing-branch",children:"Example 3: RC on Existing Branch"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Current state: release/9.1 exists with 9.1.0-rc.0\n# Creating 9.1.0-rc.1\n\n$ release-tool generate 9.1.0-rc.1 --repo-path .\n\n# Output:\n# Release branch: release/9.1\n# \u2192 Using existing branch (source: release/9.1)\n# (No branch creation needed)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"example-4-hotfix-patch-release",children:"Example 4: Hotfix Patch Release"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Current state: release/9.0 and release/9.1 both exist\n# Creating hotfix 9.0.5 for older release\n\n$ release-tool generate 9.0.5 --repo-path .\n\n# Output:\n# Release branch: release/9.0\n# \u2192 Using existing branch (source: release/9.0)\n# (Commits will be based on release/9.0, not latest release/9.1)\n"})}),"\n",(0,l.jsx)(n.h2,{id:"branch-workflow",children:"Branch Workflow"}),"\n",(0,l.jsx)(n.h3,{id:"recommended-git-workflow",children:"Recommended Git Workflow"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Generate Release"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"release-tool generate --new-minor --repo-path . -o notes.md\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Tool creates release branch automatically"}),"\n",(0,l.jsx)(n.li,{children:"You remain on your current working branch"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Review Branch"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git branch -a | grep release/\n"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Verify the release branch was created"}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Optional: Checkout and Test"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"git checkout release/9.1\n# Run tests, build, etc.\n"})}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Push Release"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"release-tool push 9.1.0 -f notes.md\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"custom-branch-templates",children:"Custom Branch Templates"}),"\n",(0,l.jsx)(n.p,{children:"You can customize the branch naming pattern:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:'[branch_policy]\n# Custom template examples:\n\n# Example 1: Include patch version\nrelease_branch_template = "release/{major}.{minor}.{patch}"\n# Results in: release/9.1.0\n\n# Example 2: Different prefix\nrelease_branch_template = "rel-{major}.{minor}.x"\n# Results in: rel-9.1.x\n\n# Example 3: Version prefix\nrelease_branch_template = "v{major}.{minor}"\n# Results in: v9.1\n'})}),"\n",(0,l.jsx)(n.h2,{id:"disabling-automatic-branch-creation",children:"Disabling Automatic Branch Creation"}),"\n",(0,l.jsx)(n.p,{children:"If you prefer to manage branches manually:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:"[branch_policy]\ncreate_branches = false\n"})}),"\n",(0,l.jsx)(n.p,{children:"With this setting, the tool will:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"\u2705 Still determine which branch should be used"}),"\n",(0,l.jsx)(n.li,{children:"\u2705 Display the expected branch name"}),"\n",(0,l.jsxs)(n.li,{children:["\u274c ",(0,l.jsx)(n.strong,{children:"Not"})," automatically create the branch"]}),"\n",(0,l.jsx)(n.li,{children:"\u26a0\ufe0f You must create the branch manually before generating"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"branching-from-main-instead-of-previous-release",children:"Branching from Main Instead of Previous Release"}),"\n",(0,l.jsxs)(n.p,{children:["To always branch from ",(0,l.jsx)(n.code,{children:"main"})," instead of the previous release:"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-toml",children:"[branch_policy]\nbranch_from_previous_release = false\n"})}),"\n",(0,l.jsx)(n.p,{children:"This changes the behavior:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["New major (9.0.0): Still from ",(0,l.jsx)(n.code,{children:"main"})," \u2713"]}),"\n",(0,l.jsxs)(n.li,{children:["New minor (9.1.0): From ",(0,l.jsx)(n.code,{children:"main"})," instead of ",(0,l.jsx)(n.code,{children:"release/9.0"})]}),"\n",(0,l.jsx)(n.li,{children:"Use case: When releases are independent and don't build on each other"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,l.jsx)(n.h3,{id:"branch-already-exists",children:"Branch Already Exists"}),"\n",(0,l.jsx)(n.p,{children:'If you see "Branch already exists" warnings:'}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["This is ",(0,l.jsx)(n.strong,{children:"expected"})," for subsequent RCs or patches"]}),"\n",(0,l.jsx)(n.li,{children:"The tool will use the existing branch"}),"\n",(0,l.jsx)(n.li,{children:"No action needed"}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"branch-not-found",children:"Branch Not Found"}),"\n",(0,l.jsx)(n.p,{children:'If generation fails with "branch not found":'}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Enable ",(0,l.jsx)(n.code,{children:"create_branches = true"})," in config"]}),"\n",(0,l.jsxs)(n.li,{children:["Or manually create the branch: ",(0,l.jsx)(n.code,{children:"git branch release/9.1 main"})]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"wrong-source-branch",children:"Wrong Source Branch"}),"\n",(0,l.jsx)(n.p,{children:"If a branch was created from the wrong source:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Delete the branch: ",(0,l.jsx)(n.code,{children:"git branch -D release/9.1"})]}),"\n",(0,l.jsxs)(n.li,{children:["Verify configuration in ",(0,l.jsx)(n.code,{children:"release_tool.toml"})]}),"\n",(0,l.jsxs)(n.li,{children:["Re-run ",(0,l.jsx)(n.code,{children:"generate"})," command"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"integration-with-version-gaps",children:"Integration with Version Gaps"}),"\n",(0,l.jsx)(n.p,{children:"The branching strategy works with the version gap detection:"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-bash",children:"# Attempting to skip from 9.0 to 9.2\n$ release-tool generate 9.2.0 --repo-path .\n\n# Output:\n# Warning: Version gap detected: 9.0.0 \u2192 9.2.0 (missing 9.1.x)\n# Release branch: release/9.2\n# \u2192 Branch does not exist, will create from: release/9.0\n"})}),"\n",(0,l.jsx)(n.p,{children:"The tool will:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["Warn about the gap (based on ",(0,l.jsx)(n.code,{children:"gap_detection"})," setting)"]}),"\n",(0,l.jsxs)(n.li,{children:["Still create ",(0,l.jsx)(n.code,{children:"release/9.2"})," from ",(0,l.jsx)(n.code,{children:"release/9.0"})]}),"\n",(0,l.jsx)(n.li,{children:"Allow you to proceed or abort"}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(n.ol,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Keep release branches"}),": Don't delete old release branches - they're needed for hotfixes"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Tag at release time"}),": Tag the commit when you publish the release"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Merge strategy"}),": Consider cherry-picking hotfixes to newer releases"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Dry-run first"}),": Always use ",(0,l.jsx)(n.code,{children:"--dry-run"})," to preview branch creation"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Version consistency"}),": Ensure branch naming matches your tag naming convention"]}),"\n"]}),"\n",(0,l.jsx)(n.h2,{id:"see-also",children:"See Also"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/release-tool/docs/usage",children:"Usage Guide"})," - Basic command usage"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/release-tool/docs/configuration",children:"Configuration"})," - Full configuration reference"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.a,{href:"/release-tool/docs/policies",children:"Policies"})," - Version policies and gap detection"]}),"\n"]})]})}function d(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}}}]);